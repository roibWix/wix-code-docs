{ "name": "wix-search",
  "mixes": [],
  "labels": [],
  "location":
    { "lineno": 1,
      "filename": "search.js" },
  "docs":
    { "summary": "The wix-search module contains functionality for searching a site.",
      "description":
        [ "The wix-search API allows you to create a custom site search experience for your site visitors.",
          " For example, you can use a text input element to get a search phrase from site visitors,",
          " and use a repeater to display the results of a search.",
          "",
          " To enable Search API functionality for your site, you must add the <a href=\"https://support.wix.com/en/article/about-wix-site-search\" target=\"_blank\">Wix Site Search application</a> to",
          " your site. After installing the app you can delete the Search Bar, but make sure to leave the  <a href=\"https://support.wix.com/en/article/about-wix-site-search#understanding-the-search-results-page\" target=\"_blank\">Search Results page</a> on",
          " your site. Note that you cannot use the Search API to control the Wix Search Bar or Search Results page.",
          "",
          " The Search API searches supported site documents and returns matching search results in [`Document`](wix-search.WixSearchResult.html#Document) form.",
          " The following documents are currently supported:",
          "",
          " + **Site pages:** All regular site pages with <a href=\"https://support.wix.com/en/article/enabling-search-engines-eg-google-to-find-your-site\" target=\"_blank\">SEO indexing enabled</a>. Note that Wix site pages are indexed by default. Dynamic pages, custom router pages, and some Wix app pages are not currently included in searches.",
          " + **Wix app pages:** Items in the following database collections: Blog/Posts, Bookings/Services, Forum/Posts, and Stores/Products. Each item represents a Wix app page on your site.",
          "",
          " To use the search module, import `wixSearch` from the `wix-search` module:",
          "",
          "   ``` javascript",
          "   import wixSearch from 'wix-search';",
          "   ```" ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "search",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "phrase",
              "type": "string",
              "doc": "The phrase to run the search on.",
              "optional": true } ],
        "ret":
          { "type": "wix-search.WixSearchBuilder",
            "doc": "A search builder object." },
        "locations":
          [ { "lineno": 29,
              "filename": "search.js" } ],
        "docs":
          { "summary": "Creates a search.",
            "description":
              [ "The `search()` function builds a search for a site and returns",
                " a [`WixSearchBuilder`](wix-search.WixSearchBuilder.html) object.",
                "",
                " The returned object contains the search builder, which is used",
                " to run the search with the [`find()`](wix-search.WixSearchBuilder.html#find)",
                " function.",
                "",
                " Before running `find()`, you can refine the search by chaining [`WixSearchBuilder`](wix-search.WixSearchBuilder.html)",
                " functions on to the search. `WixSearchBuilder` functions enable you to filter",
                " and control the results a search returns.",
                "",
                " The `search()` runs with the following [`WixSearchBuilder`](wix-search.WixSearchBuilder.html)",
                " defaults that you can override:",
                "",
                " + [**documentType**](wix-search.WixSearchBuilder.html#documentType): none (searches all document types)",
                " + [**language**](wix-search.WixSearchBuilder.html#language): For multilingual sites, the current language. For single-language sites, the site language.",
                " + [**skip**](wix-search.WixSearchBuilder.html#skip): `0`",
                " + [**limit**](wix-search.WixSearchBuilder.html#limit): `25`",
                "",
                "",
                "`find()` returns results in the form of a [`WixSearchResult`](wix-search.WixSearchResult.html), which",
                " contains [`documents`](wix-search.WixSearchResult~Document) that match the search, information about the",
                " search itself, and functions for paging through the search results.",
                "",
                "`search()` is not case sensitive.",
                "",
                " If a search `phrase` is not specified, `search` returns all documents refined by the search builder." ],
            "links": [],
            "examples":
              [ { "title": "Build a search",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "let search = wixSearch.search(phrase);" ],
                  "extra":
                    {  } },
                { "title": "Build and perform a search",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "$w(\"#searchInput\").onKeyPress((keyPress) => {",
                      "  if (keyPress.key === \"Enter\") {",
                      "    const phrase = $w(\"#searchInput\").value;",
                      "    wixSearch.search(phrase)",
                      "      .find()",
                      "      .then((results) => {",
                      "        if (results.documents.length > 0) {",
                      "          let documents = results.documents;",
                      "          let firstDocument = documents[0];",
                      "          let totalCount = results.totalCount;",
                      "          let pageSize = results.pageSize;",
                      "          let currentPage = results.currentPage;",
                      "          let totalPages = results.totalPages;",
                      "          let hasNext = results.hasNext();",
                      "          let hasPrev = results.hasPrev();",
                      "          let length = results.length;",
                      "        } else {",
                      "          console.log(\"No matching results\");",
                      "        }",
                      "      })",
                      "      .catch((error) => {",
                      "        console.log(error);",
                      "      });",
                      "  }",
                      "});" ],
                  "extra":
                    {  } },
                { "title": "Build and perform a search and get the first document in the search results",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "$w(\"#searchInput\").onKeyPress((keyPress) => {",
                      "  if (keyPress.key === \"Enter\") {",
                      "    const phrase = $w(\"#searchInput\").value;",
                      "    wixSearch.search(phrase)",
                      "      .find()",
                      "      .then((results) => {",
                      "        if (results.documents.length > 0) {",
                      "          let firstDocument = results.documents[0];",
                      "        } else {",
                      "          console.log(\"No matching results\");",
                      "        }",
                      "      })",
                      "      .catch((error) => {",
                      "        console.log(error);",
                      "      });",
                      "  }",
                      "});",
                      "",
                      "/**   Example firstDocument:",
                      "  *",
                      "  *  {",
                      "  *     \"_id\":             \"18176e85-ef8b-447c-b66f-f7b7ca360a5d\",",
                      "  *     \"url\":             \"/product-page/product-title\",",
                      "  *     \"documentType\"     \"Stores/Product\",",
                      "  *     \"image\":           \"wix:image://v1/67...4df7.jpg#originWidth=1920&originHeight=2891\",",
                      "  *     \"title\":           \"Product title\",",
                      "  *     \"description\":     \"Product description\"",
                      "  *   }",
                      "  */" ],
                  "extra":
                    {  } },
                { "title": "Build and perform a search and display the results in a repeater",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "// Before search runs, set the repeater data as empty",
                      "$w('#repeater').data = [];",
                      "",
                      "$w(\"#searchInput\").onKeyPress((keyPress) => {",
                      "  if (keyPress.key === \"Enter\") {",
                      "    const phrase = $w(\"#searchInput\").value;",
                      "    wixSearch.search(phrase)",
                      "      .documentType(\"Stores/Products\")",
                      "      .find()",
                      "      .then((results) => {",
                      "        if (results.documents.length > 0) {",
                      "          $w('#repeater').data = results.documents;",
                      "        } else {",
                      "          console.log(\"No matching results\");",
                      "        }",
                      "      })",
                      "      .catch((error) => {",
                      "        console.log(error);",
                      "      });",
                      "  }",
                      "});",
                      "",
                      "$w(\"#repeater\").onItemReady(($item, itemData) => {",
                      "  $item(\"#title\").text = itemData.title;",
                      "  $item(\"#description\").text = itemData.description;",
                      "  $item(\"#image\").src = itemData.image;",
                      "  $item(\"#button\").link = itemData.url;",
                      "});",
                      "" ],
                  "extra":
                    { "description": "This example demonstrates how to set up a search for store products and display the results in a repeater. Each button in the repeater links to the product page for the selected product." } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages": [],
  "extra":
    {  } }